class comp:
    def __init__(self,c_drive_name="C") -> None:
        self.regs = [0,0,0,0,0,0,0,0]
        self.prgm = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
        self.ram  = {
            0:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],
            1:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],
            2:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],
            3:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]
        }
        self.cd = c_drive_name + ".psh"
        f = open(self.cd,"a+")
        f.close()
    def loadPrgm(self,ramid):
        prgm = self.ram[ramid]
        pret = []
        for i in prgm:
            for a in i:
                pret.append(a)
        self.prgm = pret
    def dtb(self,d1:int):
        return f'{d1:08b}'
    def bitwiseAnd(self,b1:int,b2:int):
        db1 = self.dtb(b1)
        db2 = self.dtb(b2)
        ret = ""
        for i in range(len(db1)):
            if db1[i] == 1 == db2[i]:
                ret += "1"
            else:
                ret += "0"
        return int(ret,2)
    def bitwiseOr(self,b1:int,b2:int):
        db1 = self.dtb(b1)
        db2 = self.dtb(b2)
        ret = ""
        for i in range(len(db1)):
            if db1[i] == 1 or 1 == db2[i]:
                ret += "1"
            else:
                ret += "0"
        return int(ret,2)
    def bitwiseNot(self,b1:int):
        db1 = self.dtb(b1)
        ret = ""
        for i in db1:
            if i == "1":
                ret += "0"
            else:
                ret += "1"
        return int(ret,2)
    def bitwiseXor(self,b1:int,b2:int):
        db1 = self.dtb(b1)
        db2 = self.dtb(b2)
        ret = f'{int(db1)^int(db2)}'
        return int(ret,2)
    def runLine(self,i:int):
        opcode = self.dtb(self.prgm[i])
        if opcode[0] == "0":
            a1 = self.prgm[i+1]
        else:
            a1 = self.regs[self.prgm[i+1]]
        if opcode[1] == "0":
            a2 = self.prgm[i+2]
        else:
            a2 = self.regs[self.prgm[i+2]]
        a3 = self.prgm[i+3]
        cmd = int(opcode[2]+opcode[3]+opcode[4]+opcode[5]+opcode[6]+opcode[7],2)
        if cmd == 0:
            self.regs[a3]=a1+a2
        elif cmd == 1:
            self.regs[a3]=a1-a2
        elif cmd == 2:
            self.regs[a3]=self.bitwiseAnd(a1,a2)
        elif cmd == 3:
            self.regs[a3]=self.bitwiseOr(a1,a2)
        elif cmd == 4:
            self.regs[a3]=self.bitwiseNot(a1)
        elif cmd == 5:
            self.regs[a3]=self.bitwiseXor(a1,a2)
        elif cmd == 32 and a1 == a2:
            self.regs[6] = a3
        elif cmd == 33 and a1 != a2:
            self.regs[6] = a3
        elif cmd == 34 and a1 < a2:
            self.regs[6] = a3
        elif cmd == 35 and a1 <= a2:
            self.regs[6] = a3
        elif cmd == 36 and a1 > a2:
            self.regs[6] = a3
        elif cmd == 37 and a1 >= a2:
            self.regs[6] = a3
    def runPrgm(self):
        while self.regs[6] < len(self.prgm):
            i = self.regs[6]
            self.runLine(i)
            self.regs[6] += 4
        print(self.regs)

myComp = comp()
myComp.prgm[1] = 1
myComp.prgm[2] = 1
myComp.prgm[3] = 1
myComp.runLine(0)
print(f"{myComp.regs}") # this is f-string for debugging purposes